# ----- Status Bar -----
# Set background and foreground colors for the tmux status bar
set -g status-bg grey19 
set -g status-fg grey74

# ----- Clipboard Integration -----
# Enable clipboard support in tmux
set-option -g set-clipboard on

# Tell tmux that the terminal supports external clipboard (OSC52 escape codes).
# With a compatible terminal (Ghostty, iTerm2, Kitty), copies go straight
# to your local clipboard.
set-option -ga terminal-overrides ',*:clipboard=external'

# ----- Cursor Shape -----
# Override terminal sequences for changing cursor shape
set -g terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[2 q'

# ----- Prefix Key -----
# Unbind the default prefix (Ctrl-b) and switch to Ctrl-x
unbind C-b
set-option -g prefix C-x
bind C-b send-prefix   # still allow Ctrl-b passthrough if needed

# ----- Copy Mode -----
# Use vim-style keys in copy mode (h/j/k/l, space to start selection, enter to copy)
setw -g mode-keys vi

# When pressing Enter in copy mode:
# 1. If a fish function named "copy" exists, pipe selection into it.
# 2. Otherwise, fall back to emitting OSC52 (works with Ghostty).
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel \
  "fish -c 'if functions -q copy; copy; else printf \"\033]52;c;%s\033\\\\\" (base64 | tr -d \r\n); end'"
